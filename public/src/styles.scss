/* You can add global styles to this file, and also import other style files */

@use "@angular/material" as mat;

// =============================================================================
// CSS Custom Properties (Theme Variables)
// =============================================================================

:root {
  // =========================================
  // BRAND / PRIMARY COLORS
  // =========================================
  --color-primary: #3f51b5;
  --color-primary-hover: #303f9f;
  --color-primary-light: #e8eaf6;
  --color-primary-lighter: #c5cae9;
  --color-primary-text: #ffffff;
  
  // =========================================
  // STATUS COLORS
  // =========================================
  --color-success: #4caf50;
  --color-success-light: #e8f5e9;
  --color-success-dark: #2e7d32;
  
  --color-warning: #f57c00;
  --color-warning-light: #fff3e0;
  --color-warning-dark: #e65100;
  
  --color-error: #f44336;
  --color-error-light: #ffebee;
  --color-error-dark: #c62828;
  
  --color-info: #2196f3;
  --color-info-light: #e3f2fd;
  --color-info-dark: #1565c0;

  // =========================================
  // SURFACES & BACKGROUNDS
  // =========================================
  --bg-primary: #fafafa;
  --bg-secondary: #ffffff;
  --bg-elevated: #ffffff;
  --bg-hover: rgba(0, 0, 0, 0.04);
  --bg-active: rgba(0, 0, 0, 0.08);
  --bg-selected: #e3f2fd;
  --bg-selected-hover: #bbdefb;
  
  // Surface variants
  --surface-ground: #fafafa;
  --surface-card: #ffffff;
  --surface-section: #f5f5f5;
  --surface-muted: #f8f9fa;
  
  // =========================================
  // TEXT COLORS
  // =========================================
  --text-primary: rgba(0, 0, 0, 0.87);
  --text-secondary: rgba(0, 0, 0, 0.6);
  --text-tertiary: rgba(0, 0, 0, 0.38);
  --text-disabled: rgba(0, 0, 0, 0.38);
  --text-inverse: #ffffff;
  --text-link: #1976d2;
  --text-link-hover: #1565c0;
  
  // =========================================
  // BORDERS & DIVIDERS
  // =========================================
  --border-light: rgba(0, 0, 0, 0.08);
  --border-color: rgba(0, 0, 0, 0.12);
  --border-strong: rgba(0, 0, 0, 0.24);
  --divider-color: rgba(0, 0, 0, 0.12);
  
  // =========================================
  // SHADOWS
  // =========================================
  --shadow-color: rgba(0, 0, 0, 0.2);
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.12);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  
  // =========================================
  // COMPONENT-SPECIFIC
  // =========================================
  
  // Excel table
  --excel-cell-bg: #f5f5f5;
  --excel-cell-border: #e1e1e1;
  --excel-header-bg: whitesmoke;
  --excel-selected: #e3f2fd;
  --cell-hover-bg: rgba(0, 0, 0, 0.025);
  --cell-highlight-bg: rgba(0, 0, 0, 0.065);
  --cell-highlight-border: rgba(0, 0, 0, 0.125);
  --cell-active-shadow: rgba(0, 0, 0, 0.3);
  
  // Drag and drop
  --drag-placeholder-bg: #e8e8e8;
  --drag-placeholder-border: #bbb;
  --drag-preview-shadow: 0 5px 15px rgba(0, 0, 0, 0.25);
  
  // Inputs
  --input-border: rgba(0, 0, 0, 0.23);
  --input-border-hover: rgba(0, 0, 0, 0.87);
  --input-border-focus: var(--color-primary);
  --input-bg: transparent;
}

// =============================================================================
// DARK THEME
// =============================================================================

body.dark-theme {
  // =========================================
  // BRAND / PRIMARY (adjusted for dark)
  // =========================================
  --color-primary: #7986cb;
  --color-primary-hover: #9fa8da;
  --color-primary-light: #1a237e;
  --color-primary-lighter: #283593;
  --color-primary-text: #000000;
  
  // =========================================
  // STATUS COLORS (adjusted for visibility)
  // =========================================
  --color-success: #66bb6a;
  --color-success-light: #1b3d1f;
  --color-success-dark: #81c784;
  
  --color-warning: #ffa726;
  --color-warning-light: #3d2e1a;
  --color-warning-dark: #ffb74d;
  
  --color-error: #ef5350;
  --color-error-light: #3d1f1f;
  --color-error-dark: #e57373;
  
  --color-info: #42a5f5;
  --color-info-light: #1a2d3d;
  --color-info-dark: #64b5f6;

  // =========================================
  // SURFACES & BACKGROUNDS
  // =========================================
  --bg-primary: #121212;
  --bg-secondary: #1e1e1e;
  --bg-elevated: #2d2d2d;
  --bg-hover: rgba(255, 255, 255, 0.08);
  --bg-active: rgba(255, 255, 255, 0.12);
  --bg-selected: #1a237e;
  --bg-selected-hover: #283593;
  
  --surface-ground: #121212;
  --surface-card: #1e1e1e;
  --surface-section: #252525;
  --surface-muted: #2d2d2d;
  
  // =========================================
  // TEXT COLORS
  // =========================================
  --text-primary: rgba(255, 255, 255, 0.87);
  --text-secondary: rgba(255, 255, 255, 0.6);
  --text-tertiary: rgba(255, 255, 255, 0.38);
  --text-disabled: rgba(255, 255, 255, 0.38);
  --text-inverse: #121212;
  --text-link: #90caf9;
  --text-link-hover: #bbdefb;
  
  // =========================================
  // BORDERS & DIVIDERS
  // =========================================
  --border-light: rgba(255, 255, 255, 0.05);
  --border-color: rgba(255, 255, 255, 0.12);
  --border-strong: rgba(255, 255, 255, 0.24);
  --divider-color: rgba(255, 255, 255, 0.12);
  
  // =========================================
  // SHADOWS
  // =========================================
  --shadow-color: rgba(0, 0, 0, 0.5);
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.4), 0 4px 6px rgba(0, 0, 0, 0.3);
  
  // =========================================
  // COMPONENT-SPECIFIC
  // =========================================
  
  // Excel table
  --excel-cell-bg: #2d2d2d;
  --excel-cell-border: #424242;
  --excel-header-bg: #383838;
  --excel-selected: #1a237e;
  --cell-hover-bg: rgba(255, 255, 255, 0.04);
  --cell-highlight-bg: rgba(255, 255, 255, 0.1);
  --cell-highlight-border: rgba(255, 255, 255, 0.2);
  --cell-active-shadow: rgba(255, 255, 255, 0.2);
  
  // Drag and drop
  --drag-placeholder-bg: #383838;
  --drag-placeholder-border: #555;
  --drag-preview-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
  
  // Inputs
  --input-border: rgba(255, 255, 255, 0.23);
  --input-border-hover: rgba(255, 255, 255, 0.87);
}

// =============================================================================
// Base Styles
// =============================================================================

html, body { height: 100%; }

body {
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: background-color 0.2s ease, color 0.2s ease;
}

// Smooth transitions for theme switching
.mat-mdc-card,
.mat-mdc-dialog-container,
.mat-mdc-menu-panel,
.mat-toolbar,
.mat-sidenav,
.mat-expansion-panel,
input,
textarea {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

// =============================================================================
// Dark Theme Overrides for Angular Material
// =============================================================================

body.dark-theme {
  // Cards
  .mat-mdc-card {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary);
  }

  // Dialogs
  .mat-mdc-dialog-container {
    --mdc-dialog-container-color: var(--bg-elevated);
  }
  
  .mat-mdc-dialog-surface {
    background-color: var(--bg-elevated) !important;
  }

  // Form fields - comprehensive styling
  .mat-mdc-form-field {
    --mdc-filled-text-field-container-color: var(--bg-elevated);
    --mdc-outlined-text-field-outline-color: var(--border-color);
    --mdc-outlined-text-field-hover-outline-color: var(--text-secondary);
    --mdc-outlined-text-field-focus-outline-color: var(--color-primary);
    --mdc-outlined-text-field-label-text-color: var(--text-secondary);
    --mdc-outlined-text-field-hover-label-text-color: var(--text-primary);
    --mdc-outlined-text-field-focus-label-text-color: var(--color-primary);
    --mdc-outlined-text-field-input-text-color: var(--text-primary);
    --mdc-filled-text-field-label-text-color: var(--text-secondary);
    --mdc-filled-text-field-hover-label-text-color: var(--text-primary);
    --mdc-filled-text-field-focus-label-text-color: var(--color-primary);
    --mdc-filled-text-field-input-text-color: var(--text-primary);
    --mat-form-field-state-layer-color: var(--bg-hover);
  }

  .mat-mdc-text-field-wrapper {
    background-color: var(--bg-elevated);
  }

  // Form field labels
  .mdc-floating-label, 
  .mat-mdc-floating-label,
  .mdc-text-field__input::placeholder {
    color: var(--text-secondary) !important;
  }

  .mat-mdc-form-field-hint {
    color: var(--text-secondary);
  }

  // Select
  .mat-mdc-select {
    --mat-select-trigger-text-color: var(--text-primary);
    --mat-select-placeholder-text-color: var(--text-secondary);
    --mat-select-enabled-arrow-color: var(--text-secondary);
  }

  .mat-mdc-select-value-text {
    color: var(--text-primary);
  }

  // Tables - comprehensive styling
  .mat-mdc-table {
    background-color: var(--bg-secondary);
    --mat-table-header-headline-color: var(--text-primary);
    --mat-table-row-item-label-text-color: var(--text-primary);
    --mat-table-row-item-outline-color: var(--border-color);
  }

  .mat-mdc-header-cell {
    color: var(--text-primary) !important;
    background-color: var(--bg-elevated);
    border-bottom-color: var(--border-color) !important;
  }

  .mat-mdc-cell {
    color: var(--text-primary);
    border-bottom-color: var(--border-light) !important;
  }

  .mat-mdc-row:hover {
    background-color: var(--bg-hover);
  }

  .mat-mdc-header-row {
    background-color: var(--bg-elevated);
  }

  // Menus
  .mat-mdc-menu-panel {
    background-color: var(--bg-elevated) !important;
  }

  .mat-mdc-menu-item {
    color: var(--text-primary);
    
    &:hover {
      background-color: var(--bg-hover);
    }

    .mat-icon {
      color: var(--text-secondary);
    }
  }

  // User menu header
  .user-header {
    background: linear-gradient(135deg, rgba(121, 134, 203, 0.15) 0%, transparent 100%);
  }

  .user-avatar {
    background: linear-gradient(135deg, var(--color-primary) 0%, #5c6bc0 100%);
    box-shadow: 0 2px 12px rgba(121, 134, 203, 0.3);
  }

  // Select / Dropdowns
  .mat-mdc-select-panel {
    background-color: var(--bg-elevated) !important;
  }

  .mat-mdc-option {
    color: var(--text-primary);
    
    &:hover {
      background-color: var(--bg-hover);
    }
  }

  // Expansion panels
  .mat-expansion-panel {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    
    .mat-expansion-panel-header {
      color: var(--text-primary);
      
      .mat-expansion-panel-header-title {
        color: var(--text-primary);
      }
      
      .mat-expansion-panel-header-description {
        color: var(--text-secondary);
      }
      
      .mat-expansion-indicator::after {
        color: var(--text-secondary);
      }
    }
    
    .mat-expansion-panel-body {
      color: var(--text-primary);
    }
  }

  // Buttons - outlined/stroked style
  .mat-mdc-outlined-button {
    --mdc-outlined-button-outline-color: var(--border-color);
    --mdc-outlined-button-label-text-color: var(--text-primary);
    --mat-text-button-state-layer-color: var(--text-primary);
    --mat-text-button-ripple-color: rgba(255, 255, 255, 0.1);
    
    &:not(:disabled) {
      border-color: var(--border-color);
      color: var(--text-primary);
    }
  }

  .mat-mdc-button {
    --mdc-text-button-label-text-color: var(--text-primary);
    --mat-text-button-state-layer-color: var(--text-primary);
    --mat-text-button-ripple-color: rgba(255, 255, 255, 0.1);
  }

  // Stroked button (Cancel, etc)
  .mat-stroked-button,
  button[mat-stroked-button] {
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
    --mat-text-button-state-layer-color: var(--text-primary);
    --mat-text-button-ripple-color: rgba(255, 255, 255, 0.1);
  }

  // Icon buttons
  .mat-mdc-icon-button {
    --mdc-icon-button-icon-color: var(--text-primary);
    --mat-icon-button-state-layer-color: var(--text-primary);
    --mat-icon-button-ripple-color: rgba(255, 255, 255, 0.1);
  }

  // All button ripples in dark mode
  .mat-mdc-button-base {
    --mat-mdc-button-persistent-ripple-color: var(--text-primary);
    --mat-mdc-button-ripple-color: rgba(255, 255, 255, 0.1);
  }

  // Mat ripple (for mat-ripple directive)
  .mat-ripple-element {
    background-color: rgba(255, 255, 255, 0.1) !important;
  }

  // Dialog content
  .mat-mdc-dialog-title {
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-content {
    color: var(--text-primary);
  }

  // Snackbars
  .mat-mdc-snack-bar-container {
    --mdc-snackbar-container-color: var(--bg-elevated);
    --mdc-snackbar-supporting-text-color: var(--text-primary);
  }

  // Tooltips
  .mat-mdc-tooltip {
    --mdc-plain-tooltip-container-color: var(--bg-elevated);
    --mdc-plain-tooltip-supporting-text-color: var(--text-primary);
  }

  // Dividers
  .mat-divider {
    border-top-color: var(--divider-color);
  }

  // Checkboxes
  .mat-mdc-checkbox {
    --mdc-checkbox-unselected-icon-color: var(--text-secondary);
  }

  // Disabled text
  .mat-mdc-menu-item[disabled] {
    color: var(--text-disabled) !important;
  }

  // Lists
  .mat-mdc-list-item {
    color: var(--text-primary);
  }

  // Sidenav
  .mat-sidenav {
    background-color: var(--bg-secondary);
  }

  .mat-sidenav-content {
    background-color: var(--bg-primary);
  }

  // Drawer containers
  .mat-drawer-container {
    background-color: var(--bg-primary);
  }

  .mat-drawer-content {
    background-color: var(--bg-primary);
  }

  // Inputs
  input, textarea {
    color: var(--text-primary);
    
    &::placeholder {
      color: var(--text-tertiary);
    }
  }

  // Links
  a {
    color: var(--text-link);
    
    &:hover {
      color: var(--text-link-hover);
    }
  }
  
  // Toolbar
  .mat-toolbar {
    background-color: var(--bg-secondary) !important;
  }

  // Dropzone / file upload area
  .dropzone {
    border-color: var(--border-color);
    background-color: var(--bg-secondary);
    color: var(--text-secondary);
  }

  // CDK Drag and Drop
  .cdk-drag-preview {
    background-color: var(--surface-card);
    color: var(--text-primary);
  }

  .cdk-drag-placeholder {
    background-color: var(--drag-placeholder-bg);
    border-color: var(--drag-placeholder-border);
  }

  // Radio buttons
  .mat-mdc-radio-button {
    --mdc-radio-unselected-icon-color: var(--text-secondary);
    --mat-radio-label-text-color: var(--text-primary);
  }

  // Chips
  .mat-mdc-chip {
    --mdc-chip-label-text-color: var(--text-primary);
    --mdc-chip-elevated-container-color: var(--bg-elevated);
  }

  // Progress bars/spinners
  .mat-mdc-progress-spinner {
    --mdc-circular-progress-active-indicator-color: var(--color-primary);
  }

  // Badges
  .mat-badge-content {
    background-color: var(--color-primary);
  }

  // Tab labels
  .mat-mdc-tab {
    --mdc-tab-label-text-color: var(--text-secondary);
    --mat-tab-header-active-label-text-color: var(--text-primary);
    --mat-tab-header-active-focus-label-text-color: var(--text-primary);
    --mat-tab-header-active-hover-label-text-color: var(--text-primary);
  }

  // Slider
  .mat-mdc-slider {
    --mdc-slider-handle-color: var(--color-primary);
    --mdc-slider-active-track-color: var(--color-primary);
    --mdc-slider-inactive-track-color: var(--border-color);
  }

  // Slide toggle
  .mat-mdc-slide-toggle {
    --mdc-switch-unselected-track-color: var(--border-strong);
    --mdc-switch-unselected-handle-color: var(--text-secondary);
  }

  // Headings
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
  }

  // Elevated containers (mat-elevation-z*)
  .mat-elevation-z1,
  .mat-elevation-z2,
  .mat-elevation-z3,
  .mat-elevation-z4,
  .mat-elevation-z5,
  .mat-elevation-z6,
  .mat-elevation-z8 {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
  }

  // Paragraph and general text
  p, span, label, li {
    color: var(--text-primary);
  }

  // Labels in forms
  label {
    color: var(--text-secondary);
  }
}

// =============================================================================
// Utility Classes
// =============================================================================

.basic-container {
  padding: 30px;
}

.version-info {
  font-size: 8pt;
  float: right;
}

.spacer {
  flex: 1 1 auto;
}

.align-text-center {
  text-align: center !important;
}

.hide-disabled {
  opacity: 1;
}

.w-fit-content {
  width: fit-content !important;
}

// Status colors
.green {
  color: var(--color-success);
}
.red {
  color: var(--color-error);
}
.orange {
  color: var(--color-warning);
}
.yellow {
  color: #FFEB3B;
}
.gray {
  color: var(--text-secondary);
}

// =============================================================================
// CDK Drag and Drop
// =============================================================================

.cdk-drag-preview {
  animation: drag-preview-fade-in 200ms ease-out;
}

@keyframes drag-preview-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

// =============================================================================
// Dialog Overrides
// =============================================================================

[mat-dialog-actions] {
  padding: 16px 24px !important;
  margin: 0 !important;
  gap: 8px;
}

// =============================================================================
// User Menu Panel
// =============================================================================

.user-menu-panel.mat-mdc-menu-panel {
  min-width: 270px !important;
  max-width: 350px !important;
  width: 270px !important;
}

.user-menu-panel .mat-mdc-menu-content {
  min-width: 270px !important;
  width: 100%;
}
